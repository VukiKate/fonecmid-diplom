#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
    // ВКМ 17.03.2025 Добавление полей реквизитов
	Группа = Элементы.Добавить("ГруппаПараметрыДоговора", Тип("ГруппаФормы"), ЭтотОбъект);
	Группа.Вид = ВидГруппыФормы.ОбычнаяГруппа;
	Группа.Группировка = ГруппировкаПодчиненныхЭлементовФормы.Вертикальная;
	Группа.ОтображатьЗаголовок = Ложь;
	Группа.Отображение = ОтображениеОбычнойГруппы.Нет;

	ДобавитьПолеРеквизита("ВКМ_ПериодС", Группа);
	ДобавитьПолеРеквизита("ВКМ_ПериодПо", Группа);
	ДобавитьПолеРеквизита("ВКМ_СтоимостьЧасаРаботы", Группа);
	ДобавитьПолеРеквизита("ВКМ_АбонентскаяПлата", Группа);
	
	ОпределитьВидимостьЭлементов();
	// ВКМ Конец добавления
   	
КонецПроцедуры 


//&НаСервере
//Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
//	
//	// ВКМ 17.03.2025 Добавление
//	//Если ЗначениеЗаполнено(ЭтотОбъект[ИмяРеквизита("ВКМ_ПериодС")]) Тогда
//	//	ТекущийОбъект.ВКМ_ПериодС = ЭтотОбъект[ИмяРеквизита("ВКМ_ПериодС")];
//	//КонецЕсли;
//	//
//	//Если ЗначениеЗаполнено(ЭтотОбъект[ИмяРеквизита("ВКМ_ПериодПо")]) Тогда
//	//	ТекущийОбъект.ВКМ_ПериодПо = ЭтотОбъект[ИмяРеквизита("ВКМ_ПериодПо")];
//	//КонецЕсли;
//	//
//	//Если ЗначениеЗаполнено(ЭтотОбъект[ИмяРеквизита("ВКМ_СтоимостьЧасаРаботы")]) Тогда
//	//	ТекущийОбъект.ВКМ_СтоимостьЧасаРаботы = ЭтотОбъект[ИмяРеквизита("ВКМ_СтоимостьЧасаРаботы")];
//	//КонецЕсли;
//	//
//	//Если ЗначениеЗаполнено(ЭтотОбъект[ИмяРеквизита("ВКМ_АбонентскаяПлата")]) Тогда
//	//	ТекущийОбъект.ВКМ_АбонентскаяПлата = ЭтотОбъект[ИмяРеквизита("ВКМ_АбонентскаяПлата")];
//	//КонецЕсли; 
//	
//	//ИмяЭлемента = "ВКМ_ПериодС";
//	//
//	//Если ЗначениеЗаполнено(ЭтаФорма.Элементы.Найти(ИмяЭлемента)) Тогда
//	//	ЭлементФормы.ПутьКДанным = "Объект.ВКМ_ПериодС";
//	//	ЭлементФормы.УстановитьДействие("ПриИзменении","ДЗ_СогласованнаяСкидкаПриИзменении"); 
//	//КонецЕсли;

//	// ВКМ Конец добавления
//	
//КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура ВидДоговораПриИзменении(Элемент)
	
	// ВКМ 17.03.2025 добавление
	ОпределитьВидимостьЭлементов();
	// ВКМ Конец добавления
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции


&НаСервере
Функция ИмяРеквизита(ВКМ_Реквизит)
	
	// ВКМ 17.03.2025
	Шаблон = "%1_%2";
	
	ПредставлениеИдентификатора = СтрЗаменить(Объект.Ссылка.УникальныйИдентификатор(), "-", "");
	
	Возврат СтрШаблон(Шаблон, ВКМ_Реквизит, ПредставлениеИдентификатора);
	// ВКМ Конец добавления
	
КонецФункции


&НаСервере
Процедура ДобавитьПолеРеквизита(ВКМ_Реквизит, Группа)
	
	// ВКМ 17.03.2025 добавление
	ИмяРеквизита = ИмяРеквизита(ВКМ_Реквизит);
	
	Элемент = Элементы.Добавить(ИмяРеквизита, Тип("ПолеФормы"), Группа);
	Элемент.Вид = ВидПоляФормы.ПолеВвода;
	Элемент.ПутьКДанным = "Объект."+ВКМ_Реквизит;
	Элемент.Заголовок = СтрЗаменить(ВКМ_Реквизит, "ВКМ_", "");
	// ВКМ Конец добавления
	
КонецПроцедуры


&НаСервере
Процедура ОпределитьВидимостьЭлементов()

	//ВКМ 17.03.2025 добавление
	Если Объект.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.ВКМ_АбонентскоеОбслуживание Тогда
		Элементы.ГруппаПараметрыДоговора.Видимость = Истина;
	Иначе
		Элементы.ГруппаПараметрыДоговора.Видимость = Ложь;
	КонецЕсли;		 
    // ВКМ Конец добавления

КонецПроцедуры 


#КонецОбласти





